[ì‘ì„±ë§í¬](https://delirious-sock-4dc.notion.site/2e3c519c51b9456fbdb652ff59c303b1)

# ë””ë¯¸í„° ë²•ì¹™

ìƒì„± ì¼ì‹œ: 2021ë…„ 9ì›” 3ì¼
íƒœê·¸: OOP

# ë””ë¯¸í„° ë²•ì¹™
The Law of Demeter

---

`"Object-Oriented Programming: An Objective Sense of Style"` ì—ì„œ ì²˜ìŒ ì†Œê°œëœ ê°œë…

ì¹¼ ë¦¬ë² í—¤ì™€ ê·¸ì˜ ë™ë£Œë“¤ì´ ë””ë¯¸í„°(Demeter)ë¼ëŠ” í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë˜ ì¤‘ ì´ ë²•ì¹™ì„ ë°œê²¬

## ì˜ë¯¸

ê°ì²´ë“¤ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ” ë°©ë²•ì„ ì œì‹œ

ê·¸ ë°©ë²•ì€ ê°ì²´ë“¤ì˜ í˜‘ë ¥ ê²½ë¡œë¥¼ ì œí•œí•˜ëŠ” ê²ƒ

ë” ìì„¸íˆ ë§í•˜ë©´, ê¸´ ê°ì²´ êµ¬ì¡°ì˜ ê²½ë¡œë¥¼ ë”°ë¼ ë©€ë¦¬ ë–¨ì–´ì ¸ ìˆëŠ” ê°„ì ‘ì ì¸ ê°ì²´ì— ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ì„¤ê³„ëŠ” í”¼í•˜ë¼ëŠ” ê²ƒì´ë‹¤.

ì´ëŸ¬í•œ íŠ¹ì§• ë•Œë¬¸ì— `Don't Talk to Strangers` í˜¹ì€ `Principle of least knowledge`ë¼ê³ ë„ ë¶€ë¥¸ë‹¤.

ë””ë¯¸í„° ë²•ì¹™ì—ì„œëŠ” ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼í•œë‹¤.

**í´ë˜ìŠ¤ Cì˜ ë©”ì„œë“œ Mì€ ë‹¤ìŒê³¼ ê°™ì€ ê°ì²´ì˜ ë©”ì„œë“œë§Œ í˜¸ì¶œí•´ì•¼í•¨**

- `Case 1.`  C ìì‹ 
- `Case 2.`  M ë‚´ë¶€ì—ì„œ ìƒì„±ëœ ê°ì²´
- `Case 3.`  Mì˜ ì¸ìˆ˜ë¡œ ë„˜ì–´ì˜¨ ê°ì²´
- `Case 4.`  C ë©¤ë²„ ê°ì²´
- `Case 5.`  Mì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì „ì—­ë³€ìˆ˜ ê°ì²´

**ì•ˆë˜ëŠ”ê±°**

- `Case 6.`  ìœ„ ê°ì²´ì—ì„œ í—ˆìš©ëœ ë©”ì„œë“œê°€ ë°˜í™˜í•˜ëŠ” ê°ì²´

ì½”ë“œë¡œ í’€ì–´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```java
public class Demeter {

		private Case4 case4;

		private Object case1Method() {}

		public void good(Case3 case3) {
				case1Method(); 
				Case2 case2 = new Case2();
				case2.Method();
				case3.Method();
				case4.Method();
				Utils.Case5.Method();
		}

		public void bad(Case3 case3) {
				case1Method().Method(); 
				Case2 case2 = new Case2();
				case2.getObject().Method();
				case3.getObject().Method();
				case4.getObject().Method();
				Utils.Case5.getObject().Method();
		}
}
```

**ì¦‰, ë°”ë¡œ ì˜† ì¹œêµ¬ì™€ë§Œ ì´ì•¼ê¸°í•˜ê³  ì¹œêµ¬ì˜ ì¹œêµ¬ì™€ëŠ” ì´ì•¼ê¸° í•˜ì§€ ë§ë¼ëŠ” ê²ƒì´ í•µì‹¬ì´ë‹¤.**

**ëŒ€í‘œì ì¸ ë””ë¯¸í„° ë²•ì¹™ ìœ„ë°˜ ì½”ë“œ**

```java
object.getChild().getContent().getItem().getTitle();
```

- getter ë©”ì„œë“œê°€ ì—°ì´ì–´ì§„ ëª¨ìŠµì´ ê¸°ì°¨ì™€ ë‹®ì•„ì„œ `ì—´ì°¨ ì „ë³µ, ê¸°ì°¨ ì¶©ëŒ` ì½”ë“œ ë¼ê³  ë¶€ë¥¸ë‹¤.

## ì‚¬ìš© ì•ˆí•˜ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ë°?

- ê°ì²´ì˜ ë‚´ë¶€ êµ¬ì¡°ì— ê°•í•˜ê²Œ ê²°í•©ëœë‹¤.
- ê°ì²´ êµ¬ì¡°ì˜ ë³€í™”ì— ë¶€ì„œì§€ê¸° ì‰½ë‹¤.

## ì˜¤í•´

ë””ë¯¸í„° ë²•ì¹™ì€ "ì˜¤ì§ í•˜ë‚˜ì˜ ë„íŠ¸ë§Œì„ ì‚¬ìš©í•˜ë¼"ëŠ” ë§ë¡œ ìš”ì•½ë˜ê¸°ë„ í•œë‹¤.

ê·¸ë˜ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤í•´ë“¤ì„ í•˜ê¸° ì‰½ë‹¤.

### ì½”ë“œ ì²´ì´ë‹ ëœê±´ ì „ë¶€ ë””ë¯¸í„° ë²•ì¹™ ìœ„ë°˜ ì•„ë‹˜?

ë‹¤ìŒì˜ ì½”ë“œëŠ” ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í–ˆì„ê¹Œ?

```java
Customer.Builder()
				.name(name)
				.address(address)
				.build()
```

- ë‹µì€

    # ğŸ™…ğŸ»â€â™‚ï¸

    ìœ„ ì½”ë“œëŠ” ì „í˜•ì ì¸ ë¹Œë” íŒ¨ë˜ìœ¼ë¡œì¨ `Builder()` , `name` , `address` ëª¨ë‘ Customer ë‚´ë¶€ì˜ 

    CustomerBuilderë¼ëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•˜ê²Œ ë˜ì–´ ìˆë‹¤.

    ê·¸ëŸ¬ë¯€ë¡œ ë””ë¯¸í„° ë²•ì¹™ ì¡°ê±´ ì¤‘ Case4ì— í•´ë‹¹í•˜ê¸° ë•Œë¬¸ì— ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í•˜ì§€ ì•ŠëŠ”ë‹¤.

ë‹¤ìŒì˜ ì½”ë“œëŠ” ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í–ˆì„ê¹Œ?

```java
IntStream.of(1, 15, 20, 3, 9)
    .filter(x -> x > 10)
    .distinct()
    .count();
```

- ë‹µì€

    # ğŸ™…ğŸ»â€â™‚ï¸

    `of` , `filter` , `distinct` ëŠ” ëª¨ë‘ `IntStream` ì´ë¼ëŠ” ë™ì¼í•œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.

    IntStreamì„ ë‹¤ë¥¸ IntStreamìœ¼ë¡œ ë³€í™˜í•  ë¿, ê°ì²´ë¥¼ ë‘˜ëŸ¬ì‹¸ê³  ìˆëŠ” ìº¡ìŠì€ ê·¸ëŒ€ë¡œ ìœ ì§€ëœë‹¤.

    ë”°ë¼ì„œ ìœ„ ì½”ë“œëŠ” ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í•˜ì§€ ì•ŠëŠ”ë‹¤.

ë‹¤ìŒì˜ ì½”ë“œëŠ” ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í–ˆì„ê¹Œ?

```java
String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();
```

- ë‹µì€

    # ğŸ™†ğŸ»â€â™‚ï¸

    í•˜ì§€ë§Œ ë‹¤ìŒì˜ ê²½ìš°ëŠ” No

    ```java
    String outputDir = ctxt.options.scratchDir.absolutePath;
    ```

    ì´ìœ ëŠ” Yesì—ì„œ `getOptions()` , `getScratchDir()` ëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•˜ì§€ë§Œ

    Noì˜ ê²½ìš°ì—ëŠ” ìë£Œêµ¬ì¡°ì— í•´ë‹¹ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

    ê°ì²´ë¼ë©´ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ìˆ¨ê²¨ì•¼ í•˜ë¯€ë¡œ í™•ì‹¤íˆ ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í•œë‹¤. 

    ë°˜ë©´, ìë£Œ êµ¬ì¡°ë¼ë©´ ë‹¹ì—°íˆ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ë…¸ì¶œí•˜ë¯€ë¡œ ë””ë¯¸í„° ë²•ì¹™ì´ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.

    **ê°ì²´ vs ìë£Œêµ¬ì¡°**

    `ê°ì²´` : ì¶”ìƒí™” ë’¤ë¡œ ìë£Œë¥¼ ìˆ¨ê¸´ ì±„ ìë£Œë¥¼ ë‹¤ë£¨ëŠ” í•¨ìˆ˜ë§Œ ê³µê°œ
    `ìë£Œ êµ¬ì¡°` : ìë£Œë¥¼ ê·¸ëŒ€ë¡œ ê³µê°œ (ex. Point)

ë‹¤ìŒì˜ ì½”ë“œëŠ” ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í–ˆì„ê¹Œ?

```java
String command = input.getCommand().toUpperCase();
```

- ë‹µì€

    # ğŸ™…ğŸ»â€â™‚ï¸

    `getCommand()` , `toUpperCase()` ëŠ” String ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.

    Stringì€ ìë°”ì˜ ë‚´ì¥ ê°ì²´ë¡œ ì–¸ì–´ì˜ ê¸°ë³¸ ìŠ¤í™ì´ë‹¤.

    ë•Œë¬¸ì— í•´ë‹¹ ë©”ì†Œë“œê°€ ë³€ê²½ë˜ê±°ë‚˜ String íƒ€ì… ìì²´ê°€ ì—†ì–´ì§€ëŠ” ì¼ì€ ì•„ë§ˆ ì—†ë‹¤.

    ê·¸ëŸ¬ë¯€ë¡œ String ê°ì²´ëŠ” ì˜ì¡´í•´ë„ ë¬´ë°©í•˜ê¸° ë•Œë¬¸ì— ë””ë¯¸í„° ë²•ì¹™ì— ìœ„ë°˜ë˜ì§€ ì•ŠëŠ”ë‹¤.

    ì‹¤ì§ˆì ìœ¼ë¡œ ì£¼ì˜í•´ì•¼ë  ê²ƒ ì€ ìš°ë¦¬ê°€ ì§ì ‘ ë§Œë“  ì½”ë“œì´ë‹¤.

    ```java
    object.getChild().getContent().getItem().getTitle();
    ```

    ìœ„ ì½”ë“œë¥¼ ìš°ë¦¬ê°€ ë§Œë“¤ì—ˆë‹¤ê³  ê°€ì •í–ˆë‹¤ë©´
    ê°œë°œ ë„ì¤‘ í•´ë‹¹ ê°ì²´ë“¤ì€ ì–¸ì œë“ ì§€ ë³€ê²½ì´ ì¼ì–´ë‚  ê°€ëŠ¥ì„±ì´ ìˆë‹¤.

    ì‹¬ì§€ì–´ íƒ€ì…ìì²´ê°€ ì—†ì–´ì§ˆ ìˆ˜ ë„ ìˆë‹¤.

    ê·¸ë ‡ê²Œ ë˜ë©´ ìœ„ì²˜ëŸ¼ ì‚¬ìš©ëœ ëª¨ë“  ì½”ë“œë¥¼ ì°¾ì•„ë‹¤ë‹ˆë©° ìˆ˜ì •ì„ í•´ì¤˜ì•¼ë˜ëŠ” ë¶ˆìƒì‚¬ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

    ë‹µë³€í•´ì£¼ì‹  ë©˜í†  ì—í”„ë‹˜ê»˜ ê°ì‚¬ë¥¼ ğŸ‘

### ê·¸ëŸ¬ë©´ ì½”ë“œ ì²´ì´ë‹ë§Œ ì•ˆí•˜ë©´ ë˜ëŠ”ê±° ì•„ë‹˜?

- ë‹µì€

    # ğŸ™…ğŸ»â€â™‚ï¸

    ì¼ë‹¨ ë‹¤ìŒì˜ ì½”ë“œë¥¼ ë¨¼ì € ë³´ì

    ```java
    public class Customer {
        private Address address;

        public Address getAddress() {
            return address;
        }
    }

    ---

    public class Address {
        private String city;

        public String getCity() {
            return city;
        }
    }
    ```

    CustomerServiceì—ì„œ ë¶€ì²œì— ì‚¬ëŠ” ê³ ê°ë§Œ insertí•˜ê³  ì‹¶ë‹¤ë©´?

    ```java
    public class CustomerService {
    		
    		private CustomerRepository customerRepository;

    		public void insertIfBucheon(Customer customer) {
    				if(**"ë¶€ì²œ".equals(cutomer.getAddress().getCity())**){
    						customerRepository.insert(customer);
    				}
    		}
    }
    ```

    ì´ì   ë”±ë´ë„ ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í–ˆìŒì´ ë³´ì´ì§€ ì•ŠëŠ”ê°€?

    ì½”ë“œ ì²´ì´ë‹ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ ë°”ê¿”ë³´ì

    ```java
    public class CustomerService {
    		
    		private CustomerRepository customerRepository;

    		public void insertIfBucheon(Customer customer) {
    				Address address = cutomer.getAddress();
    				String city = address.getCity();
    				if("ë¶€ì²œ".equals(city)){
    						customerRepository.insert(customer);
    				}
    		}
    }
    ```

    ìœ„ ì½”ë“œëŠ” ë””ë¯¸í„° ë²•ì¹™ì„ ì¤€ìˆ˜í•˜ê³  ìˆë‹¤ê³  í•  ìˆ˜ ìˆì„ê¹Œ?

    **ë””ë¯¸í„° ë²•ì¹™ì€ ê²°í•©ë„ì™€ ê´€ë ¨ëœ ê²ƒì´ë©°, ì´ ê²°í•©ë„ê°€ ë¬¸ì œê°€ ë˜ëŠ” ê²ƒì€ ê°ì²´ì˜ ë‚´ë¶€ êµ¬ì¡°ê°€ ì™¸ë¶€ë¡œ ë…¸ì¶œë˜ëŠ” ê²½ìš°ë¡œ í•œì •ëœë‹¤.**

    ìœ„ ì½”ë“œì—ì„œëŠ” Customerì˜ ë„ì‹œ ì •ë³´ë¥¼ ì•Œê¸° ìœ„í•´ì„œ Addressì™€ Cityì •ë³´ë¥¼ ë“œëŸ¬ë‚´ê³  ìˆë‹¤.

    ê²°ê³¼ì ìœ¼ë¡œ CustomerServiceëŠ” ì•Œ í•„ìš” ì—†ì—ˆë˜ ê°ì²´ë¥¼ ì•Œê²Œ ë˜ì—ˆê³  ì˜ì¡´ê´€ê³„ê°€ í˜•ì„±ë˜ì—ˆë‹¤. 

    ì´ë¥¼ í•´ê²°í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ë°”ê¿”ë³´ì

    ```java
    public class Customer {
        private Address address;

        public boolean livesInBucheon() {
            return address.isBucheon();
        }
    }

    ---

    public class Address {
        private String city;

        public boolean isBucheon() {
    				return "ë¶€ì²œ".equals(city);
    		}
    }
    ```

    ê°ê°ì˜ ê°ì²´ë³„ë¡œ ë””ë¯¸í„° ë²•ì¹™ì„ ì¤€ìˆ˜í•˜ë„ë¡ ë°”ê¾¸ì—ˆë‹¤.

    ```java
    public class CustomerService {

    		private CustomerRepository customerRepository;

    		public void insertIfBucheon(Customer customer) {
    				if(customer.livesInBucheon()){
    						customerRepository.insert(customer);
    				}
    		}
    }
    ```

    ì´ì œ CustomerServiceëŠ”  Customer ë‚´ë¶€ ë°ì´í„° êµ¬ì¡°ë¥¼ ì•Œ ìˆ˜ ì—†ê²Œ ë˜ì—ˆë‹¤.

    Customer ë°ì´í„° êµ¬ì¡°ê°€ ë°”ë€Œì–´ë„ CustomerServiceì— ë¼ì¹˜ëŠ” ì˜í–¥ì€ ì¤„ì–´ë“¤ì—ˆì„ ê²ƒì´ë‹¤.

    **ë””ë¯¸í„° ë²•ì¹™ì„ ë‹¤ë¥¸ì‹ìœ¼ë¡œ í•´ì„í•˜ë©´ ë¬´ë¶„ë³„í•œ getterë¥¼ ìƒì„±í•˜ì§€ ë§ë¼ëŠ” ëœ»ì´ ëœë‹¤.**
    ìœ„ ì½”ë“œë„ ì²˜ìŒì—ëŠ” getterë¥¼ ìƒì„±í–ˆë‹¤ê°€ ì œê±° í•˜ì˜€ë‹¤.

## ê²°ë¡ 

- ë””ë¯¸í„° ë²•ì¹™ì€ ê°ì²´ë“¤ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ” ë°©ë²•ì— ëŒ€í•œ ê°€ì´ë“œ
- ê²°í•©ë„ë¥¼ ë‚®ì¶”ê¸° ìœ„í•´ì„œëŠ” ê°ì²´ì˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ì™¸ë¶€ë¡œ ë…¸ì¶œí•˜ëŠ”ê²ƒì„ ë°©ì§€ í•´ì•¼í•¨
- ê·¸ëŸ¬ê¸° ìœ„í•´ì„œ ê°ì²´ëŠ” ìë£Œë¥¼ ìˆ¨ê¸°ê³  í•¨ìˆ˜ë¥¼ ê³µê°œí•´ì•¼ í•œë‹¤.

í•˜ì§€ë§Œ ë¬´ë¹„íŒì ìœ¼ë¡œ ë””ë¯¸í„° ë²•ì¹™ì„ ìˆ˜ìš©í•˜ë©´ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ ê´€ì ì—ì„œ ê°ì²´ì˜ ì‘ì§‘ë„ê°€ ë‚®ì•„ì§ˆ ìˆ˜ë„ ìˆë‹¤.( â† ì´ê±° ì•„ì§ í•„ìë„ ì´í•´ëª»í•¨)

## ì°¸ì¡°

- "Clean Code"
- [https://bperhaps.tistory.com/entry/ë””ë¯¸í„°ì˜-ë²•ì¹™Law-of-Demeterì´ë€-ë­˜ê¹Œ-ê·¸ë¦¬ê³ -ì™œ-ì§€ì¼œì•¼-í• ê¹Œ](https://bperhaps.tistory.com/entry/%EB%94%94%EB%AF%B8%ED%84%B0%EC%9D%98-%EB%B2%95%EC%B9%99Law-of-Demeter%EC%9D%B4%EB%9E%80-%EB%AD%98%EA%B9%8C-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EC%99%9C-%EC%A7%80%EC%BC%9C%EC%95%BC-%ED%95%A0%EA%B9%8C)
- [https://mangkyu.tistory.com/147](https://mangkyu.tistory.com/147)